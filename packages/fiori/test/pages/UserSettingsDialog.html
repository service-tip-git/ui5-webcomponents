<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>User Settings Dialog</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<script data-ui5-config type="application/json">
		{
			"rtl": false
		}

	</script>
	<link rel="stylesheet" type="text/css" href="./styles/UserSettingsDialog.css">

	<script src="%VITE_BUNDLE_PATH%" type="module"></script>
</head>

<body>
<ui5-shellbar id="shellbar">
	<ui5-shellbar-branding slot="branding">
		Corporate Portal
		<img slot="logo" src="./img/sap-logo-svg.svg" />
	</ui5-shellbar-branding>
	<ui5-avatar slot="profile">
		<img src="./img/man_avatar_1.png"/>
	</ui5-avatar>
</ui5-shellbar>
<ui5-user-menu id="userMenuShellBar">
	<ui5-user-menu-account slot="accounts"
						   avatar-src="./img/man_avatar_1.png"
						   title-text="Alain Chevalier"
						   subtitle-text="alian.chevalier@sap.com"
						   description="Delivery Manager, SAP SE"
						   selected>
	</ui5-user-menu-account>
	<ui5-user-menu-item icon="action-settings" text="Setting" data-id="setting"></ui5-user-menu-item>
</ui5-user-menu>

<div style="border:1px solid black"></div>
<ui5-button id="btnOpenSettings">User settings</ui5-button>
<ui5-user-settings-dialog id="setting" header-text="Settings" show-search-field>
	<ui5-user-settings-item icon="user-settings" text="User Account" tooltip="User Account" header-text="User Account">
		<ui5-user-settings-account-view id="account" show-manage-account="true">
			<ui5-user-menu-account slot="account"
								   avatar-src="./img/man_avatar_1.png"
								   title-text="Alain Chevalier"
								   subtitle-text="alian.chevalier@sap.com"
								   description="Delivery Manager, SAP SE">
			</ui5-user-menu-account>

				<ui5-panel fixed class="ua-panel">
					<ui5-text>
						Reset your personalization settings for the launchpad (such as theme, language, user activities, and home page content).
					</ui5-text>
				</ui5-panel>

		</ui5-user-settings-account-view>
	</ui5-user-settings-item>

	<ui5-user-settings-item icon="palette" text="Appearance" tooltip="Appearance" header-text="Appearance">
		<ui5-user-settings-view text="Themes" slot="tabs">
			<ui5-list separators="Inner">
				<ui5-li icon="palette">SAP Morning Horizon</ui5-li>
				<ui5-li icon="palette">SAP Evening Horizon</ui5-li>
				<ui5-li icon="palette">SAP High Contrast Black (SAP Horizon)</ui5-li>
				<ui5-li icon="palette">SAP High Contrast White (SAP Horizon)</ui5-li>
			</ui5-list>
			<ui5-button id="themeSave" class="save-btn" design="Emphasized">Save</ui5-button>
			<ui5-toast design="Emphasized">Changes applied.</ui5-toast>
		</ui5-user-settings-view>
		<ui5-user-settings-view text="Display settings" slot="tabs">
			<ui5-checkbox checked text="Optimized for Touch Input"></ui5-checkbox>
			<ui5-panel fixed>
				<ui5-label>
					Increases the size and spacing of controls to allow you to interact with them more easily using your fingertip.
					This is useful for hybrid devices that combine touch and mouse events.
				</ui5-label>
			</ui5-panel>
		</ui5-user-settings-view>
	</ui5-user-settings-item>

	<ui5-user-settings-item text="Language & Region" tooltip="Language & Region" header-text="Language & Region">
		<ui5-user-settings-view>
			<div class="container">
			<div class="lr-item">
			<ui5-label>Language and Region:</ui5-label>
			<ui5-combobox placeholder="Language">
				<ui5-cb-item text="Browse Language" selected></ui5-cb-item>
				<ui5-cb-item text="English"></ui5-cb-item>
				<ui5-cb-item text="European Spanish"></ui5-cb-item>
				<ui5-cb-item text="French (France)"></ui5-cb-item>
				<ui5-cb-item text="Germany"></ui5-cb-item>
			</ui5-combobox>
			</div>
			<div class="lr-item">
				<ui5-label for="format">Date Format:</ui5-label>
				<ui5-text id="format">MMM d, y</ui5-text>
			</div>
			</div>
			<ui5-panel fixed>
				<ui5-label>
					The time zone will not be applied in UI5 apps.
					If you don't know the type of an app, you can check it in the "About" dialog in the "ID of the Application Framework‚Äù field.
				</ui5-label>
			</ui5-panel>
			</br>
			<div class="lt-time-format">
			<ui5-label for="timeFormat">Time Format:</ui5-label>
			<ui5-radio-button name="timeFormat" text="12h"></ui5-radio-button>
				<ui5-radio-button checked name="timeFormat" text="24h"></ui5-radio-button>
			</div>
			<ui5-panel fixed>
			<ui5-label>
				After you save your settings, the browser will refresh for the new settings to take effect.
			</ui5-label>
			</ui5-panel>
		</ui5-user-settings-view>
	</ui5-user-settings-item>

	<ui5-user-settings-item icon="iphone" text="SAP Mobile Start Application" tooltip="SAP Mobile Start Application" header-text="SAP Mobile Start Application">
		<ui5-user-settings-view >
			<ui5-button id="mobile1-button">iOS</ui5-button>
			<ui5-button id="mobile2-button">Android</ui5-button>
		</ui5-user-settings-view>

		<ui5-user-settings-view text="Inner Page" id="mobile-second-page" secondary>
			<ui5-text>Enable access to your site from the SAP Mobile Start application.</ui5-text>
			<ui5-button id="mobile-install">Install</ui5-button><ui5-button id="mobile-register">Register</ui5-button>
			<ui5-text>Scan the QR Code to install the mobile application</ui5-text>
			<ui5-icon name="qr-code" style="width: 20rem; height: 20rem;"></ui5-icon>
		</ui5-user-settings-view>
	</ui5-user-settings-item>

	<ui5-user-settings-item id="notifications" icon="bell" text="Notifications" tooltip="Notifications" header-text="Notifications">
		<ui5-user-settings-view>
			<ui5-list class="custom-list-main">

				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<ui5-avatar shape="Square" icon="product" color-scheme="Accent5" size="XS"></ui5-avatar>
							<div class="item-texts">
								<span class="item-title">SuccessFactors</span>
								<span class="item-subtitle">Compensation | Learning | HR</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<ui5-avatar shape="Square" icon="product" size="XS"></ui5-avatar>
							<div class="item-texts">
								<span class="item-title">S/4HANA | EMEA</span>
								<span class="item-subtitle">Finance EMEA</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch"></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<ui5-avatar shape="Square" icon="product" size="XS"></ui5-avatar>
							<div class="item-texts">
								<span class="item-title">S/4HANA | AJP</span>
								<span class="item-subtitle">Finance AJP</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
			</ui5-list>
		</ui5-user-settings-view>

		<ui5-user-settings-view id="notification-second-page" secondary>
			<ui5-li-custom class="ui5-list-secondary">
				<div class="list-item">
					<div class="item-left">
						<div class="item-texts">
							<span>Allow Notifications</span>
						</div>
					</div>
					<div class="item-right">
						<ui5-switch class="switch" checked></ui5-switch>
					</div>
				</div>
			</ui5-li-custom>
		</ui5-list>
			<ui5-list class="ui5-list-sales-order">
				<ui5-title class="list-header" size="H3">Sales</ui5-title>

				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="sales-title">Sales Order Updates</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="sales-title">Sales Order Approvals</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="sales-title">Sales Order Release</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
			</ui5-list>
			<ui5-list class="ui5-list-secondary">
				<ui5-title class="list-header" size="H3">Purchasing</ui5-title>

				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="purchase-title">Purchase Order Approval</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="purchase-title">Purchase Order Rejection</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch"></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="purchase-title">Purchase Order Overdue</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
							<ui5-icon name="slim-arrow-right" class="nav-icon" title="Navigate"></ui5-icon>
						</div>
					</div>
				</ui5-li-custom>
			</ui5-list>
		</ui5-user-settings-view>

		<ui5-user-settings-view id="sales-order-second-page" secondary>
			<ui5-title class="list-header" level="H2" size="H2">Sales Order Updates</ui5-title>

			<ui5-list class="ui5-list-secondary" separators="None">

				<ui5-li-custom >
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span>Allow Sales Order Updates</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
						</div>
					</div>
				</ui5-li-custom>
				</ui5-list>
			<ui5-list separators="None">
				<ui5-title class="list-header" size="H3">Choose how you get notified</ui5-title>

				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="item-text-title">In-App Notification</span>
								<span class="item-subtitle">Delivered inside the app</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="item-text-title">Allow Fly-Inn</span>
								<span class="item-subtitle">Notifications fly in as banner from the figth se of the application while working</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom class="push-notifications">
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="item-text-title">Push Notifications</span>
								<span class="item-subtitle">Pushed to your device immediately</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="item-text-title">E-Mail</span>
								<span class="item-subtitle">Send on your primary e-mail</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-switch class="switch" checked></ui5-switch>
						</div>
					</div>
				</ui5-li-custom>
				<ui5-li-custom>
					<div class="list-item">
						<div class="item-left">
							<div class="item-texts">
								<span class="item-text-title">Frequency</span>
								<span class="item-subtitle">Pushed to your device immedietly</span>
							</div>
						</div>
						<div class="item-right">
							<ui5-combobox value="Immediate">
								<ui5-cb-item text="Immediate"></ui5-cb-item>
								<ui5-cb-item text="After 5 minutes"></ui5-cb-item>
								<ui5-cb-item text="After 24 hours"></ui5-cb-item>
							</ui5-combobox>
						</div>
					</div>
				</ui5-li-custom>
			</ui5-list>
		</ui5-user-settings-view>
	</ui5-user-settings-item>

	<ui5-user-settings-item icon="reset" slot="fixedItems" text="Reset Settings" tooltip="Reset Settings" header-text="Reset Settings">
		<ui5-user-settings-view text="Reset Personalization">
			<ui5-button id="resetPersonalization">Reset Personalization content</ui5-button>
			<ui5-toast id="toastReset" design="Emphasized">Changes Reset.</ui5-toast>
		</ui5-user-settings-view>
		<ui5-user-settings-view text="Reset All Settings">
			<ui5-button id="resetAll">Reset All Settings content</ui5-button>
			<ui5-toast id="toastResetAll" design="Emphasized">All changes Reset.</ui5-toast>
		</ui5-user-settings-view>
	</ui5-user-settings-item>
</ui5-user-settings-dialog>

<ui5-title level="H5" class="header-title">Text Direction</ui5-title>
<ui5-switch id="direction" text-on="RTL" text-off="LTR"></ui5-switch>
<script>
	const direction = document.getElementById("direction");
	const menuShellBar = document.getElementById("userMenuShellBar");
	const settingsDialog = document.getElementById("setting");
	const settingsDialogItems = [...document.getElementsByTagName("ui5-user-settings-item")];
	const account = document.getElementById("account");

	const mobileSecondPage = document.getElementById("mobile-second-page");
	const mobile1Button = document.getElementById("mobile1-button");
	const mobile2Button = document.getElementById("mobile2-button");

	const additionalDialog = document.getElementById("additionalDialog");
	const resetAll = document.getElementById("resetAll");
	const resetPersonalization = document.getElementById("resetPersonalization");
	const toast = [...document.getElementsByTagName("ui5-toast")][0];
	const toastReset =  document.getElementById("toastReset");
	const toastResetAll =  document.getElementById("toastResetAll");
	const themeSave =document.getElementById("themeSave");
	const notificationsItem = document.getElementById("notifications");
	const notificationNavIcon = document.querySelectorAll(".nav-icon");
	const notificationSwitch = document.querySelectorAll(".switch");
	const notificationSecondPage = document.getElementById("notification-second-page");
	const salesOrderList = document.querySelectorAll(".ui5-list-sales-order");

	const salesOrderSecondPage = document.getElementById("sales-order-second-page");

	const notificationList = document.querySelectorAll(".custom-list-main");
	menuShellBar.addEventListener("item-click", function (event) {
		const item = event.detail.item.getAttribute("data-id");

		switch (item) {
			case "setting":
				settingsDialog.open = true;
		}
	});

	shellbar.addEventListener("ui5-profile-click", (event) => {
		menuShellBar.opener = event.detail.targetRef;
		if(menuShellBar.open){
			menuShellBar.open = false;
		} else {
			menuShellBar.open = true;
		}
	});

	account.addEventListener("edit-accounts-click", function () {
		console.log("Avatar clicked");
	});

	account.addEventListener("manage-account-click", function () {
		console.log("Manage account clicked");
	});

	direction.addEventListener("ui5-change", function() {
		document.body.setAttribute("dir", direction.checked ? "rtl" : "ltr");
		window["sap-ui-webcomponents-bundle"].applyDirection();
	});

	document.getElementById("btnOpenSettings").addEventListener("click", function () {
		settingsDialog.open = true;
	});

	mobile1Button.addEventListener("click", function () {
		mobileSecondPage.selected = true;
		mobileSecondPage.text = "iOS";
	});

	mobile2Button.addEventListener("click", function () {
		mobileSecondPage.selected = true;
		mobileSecondPage.text = "Android";
	});
	
	themeSave.addEventListener("click", function () {
		toast.open = true;
	});

	resetPersonalization.addEventListener("click", function () {
		toastReset.open = true;
	});

	resetAll.addEventListener("click", function () {
		toastResetAll.open = true;
	});

	settingsDialog.addEventListener("selection-change", function (event) {
		console.log(`Selection change: ${event.detail.item?.text}`, event.detail);
		if(event.detail.item?.text ==="Language & Region"){
			event.detail.item.loading=true;
			event.detail.item.loadingReason="Language & Region loading data...";
			setTimeout(function(){
				event.detail.item.loading=false;
				}, 3000);
		}
	});

	settingsDialogItems.forEach((settingsDialogItem) => {
		settingsDialogItem.addEventListener("selection-change", function (event) {
			console.log(`Selection change: ${event.detail?.view?.text}`, event.detail);
		});
	});

	settingsDialog.addEventListener("open", function (event) {
		console.log("Settings dialog opened", event);
	});

	settingsDialog.addEventListener("before-close", function (event) {
		console.log("Settings dialog before close", event.detail);
		if (!confirm("Are you sure you want to close the dialog?")) {
			event.preventDefault();
		}
	});

	settingsDialog.addEventListener("close", function (event) {
		console.log("Settings dialog closed", event);
	});

	//Notification Tab
	notificationNavIcon.forEach(icon => {
		icon.addEventListener("click", (e) => {
			const title = e.target.closest(".list-item").querySelector(".item-title").textContent;
			console.log("Navigate to: " + title +" icon clicked");
			notificationSecondPage.selected = true;
			notificationSecondPage.text = title;
		});
	});

	notificationList.forEach(item => {
		item.addEventListener("item-click", (e) => {
			const title = e.detail?.item?.querySelector(".item-title")?.textContent;
			console.log("Navigate to: " + title);
			notificationSecondPage.selected = true;
			notificationSecondPage.text = title;
		});
	});

	salesOrderList.forEach(item => {
		item.addEventListener("item-click", (e) => {
			const title = e.detail?.item?.querySelector(".sales-title")?.textContent;
			console.log("Navigate to: " + title);
			notificationSecondPage.selected = false;
			salesOrderSecondPage.selected = true;
			salesOrderSecondPage.text = title;
		});
	});

	notificationsItem.addEventListener("selection-change", (e) => {
		if(e?.detail?.view?.id ==='sales-order-second-page'){
			e.preventDefault();
			console.log("Navigate back: " + notificationSecondPage.title);
			salesOrderSecondPage.selected = false;
			notificationSecondPage.selected = true;
		}
	});

	notificationSwitch.forEach(sw => {
		sw.addEventListener("change", (e) => {
			var title = e.target.closest(".list-item").querySelector(".item-title")?.textContent;
			if(!title){
				title = e.target?.closest(".list-item").querySelector(".item-text-title")?.textContent;
			}

			const state = e.target.checked ? "ON" : "OFF";
			console.log(title + " switch changed to " + state);
		});
	});

	notificationList.forEach(item => {
		item.addEventListener("item-click", (e) => {
			const title = e.detail?.item?.querySelector(".item-title")?.textContent;
			console.log("Navigate to: " + title);
			notificationSecondPage.selected = true;
			notificationSecondPage.text = title;
		});
	});
</script>
</body>
</html>