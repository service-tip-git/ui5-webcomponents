"use strict";import{getThemeProperties as m,getRegisteredPackages as p,isThemeRegistered as f}from"../asset-registries/Themes.js";import{removeStyle as g,createOrUpdateStyle as c}from"../ManagedStyles.js";import d from"./getThemeDesignerTheme.js";import{fireThemeLoaded as u}from"./ThemeLoaded.js";import{getFeature as T}from"../FeaturesRegistry.js";import{attachCustomThemeStylesToHead as h,getThemeRoot as l}from"../config/ThemeRoot.js";import{setBaseTheme as y}from"../config/Theme.js";import{DEFAULT_THEME as S}from"../generated/AssetParameters.js";import{getCurrentRuntimeIndex as P}from"../Runtimes.js";import{updateComponentStyles as x}from"./componentStyles.js";export let _lib="ui5",_package="webcomponents-theming";const a="@"+_lib+"/"+_package,E=()=>p().has(a),U=async e=>{if(!E())return;const t=await m(a,e);t&&c(t,"data-ui5-theme-properties",a,e)},w=()=>{g("data-ui5-theme-properties",a)},I=async(e,t)=>{const o=[...p().entries()].map(async([s,{cssVariablesTarget:n}])=>{if(s===a)return;const i=await m(s,e,t);i&&(n==="root"?c(i,`data-ui5-component-properties-${P()}`,s):n==="host"&&x(s,i))});return Promise.all(o)},O=async e=>{const t=d();if(t)return t;const r=T("OpenUI5Support");if(r&&r.isOpenUI5Detected()){if(r.cssVariablesLoaded())return{themeName:r.getConfigurationSettingsObject()?.theme,baseThemeName:""}}else if(l())return await h(e),d()},b=async e=>{const t=await O(e);!t||e!==t.themeName?await U(e):w();const r=t&&t.themeName===e?e:void 0,o=t&&t.baseThemeName,s=f(e)?e:o||S;await I(s,r),y(o),u(e)};export default b;
//# sourceMappingURL=applyTheme.js.map
