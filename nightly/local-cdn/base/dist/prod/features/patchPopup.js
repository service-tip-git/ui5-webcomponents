"use strict";import y from"../getSharedResource.js";const s=y("AllOpenedPopupsRegistry",{openedRegistry:[]}),l=e=>{s.openedRegistry.push(e)},a=e=>{const t=s.openedRegistry.indexOf(e);t>-1&&s.openedRegistry.splice(t,1)},u=()=>s.openedRegistry[s.openedRegistry.length-1],g=e=>{e.setAttribute("popover","manual"),e.showPopover()},h=e=>{e.hasAttribute("popover")&&(e.hidePopover(),e.removeAttribute("popover"))},d=(e=document)=>e.querySelector(":popover-open")?!0:Array.from(e.querySelectorAll("*")).some(t=>{const o=t.shadowRoot;return o&&d(o)}),v=e=>{const t=e.prototype.open;e.prototype.open=function(...n){t.apply(this,n);const p=d();if(["OPENING","OPEN"].includes(this.getOpenState())&&p){const r=this.getContent();if(r){const i=r instanceof HTMLElement?r:r?.getDomRef();i&&g(i)}}l(this)}},m=e=>{const t=e.prototype._closed;e.prototype._closed=function(...n){const p=this.getContent(),c=p instanceof HTMLElement?p:p?.getDomRef();t.apply(this,n),c&&h(c),a(this)}},O=e=>{const t=e.prototype.onFocusEvent;e.prototype.onFocusEvent=function(n){this===u()&&t.call(this,n)}},E=()=>{const e=new CSSStyleSheet;e.replaceSync(".sapMPopup-CTX:popover-open { inset: unset; }"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]},f=e=>{v(e),m(e),E(),O(e)};export{f as patchPopup,l as addOpenedPopup,a as removeOpenedPopup,u as getTopmostPopup};
//# sourceMappingURL=patchPopup.js.map
