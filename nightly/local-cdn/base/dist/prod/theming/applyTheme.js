"use strict";import{getThemeProperties as n,getRegisteredPackages as m,isThemeRegistered as d}from"../asset-registries/Themes.js";import{removeStyle as g,createOrUpdateStyle as p}from"../ManagedStyles.js";import c from"./getThemeDesignerTheme.js";import{fireThemeLoaded as f}from"./ThemeLoaded.js";import{getFeature as u}from"../FeaturesRegistry.js";import{attachCustomThemeStylesToHead as T,getThemeRoot as h}from"../config/ThemeRoot.js";import{setBaseTheme as l}from"../config/Theme.js";import{DEFAULT_THEME as y}from"../generated/AssetParameters.js";import{getCurrentRuntimeIndex as S}from"../Runtimes.js";export let _lib="ui5",_package="webcomponents-theming";const o="@"+_lib+"/"+_package,P=()=>m().has(o),x=async e=>{if(!P())return;const t=await n(o,e);t&&p(t,"data-ui5-theme-properties",o,e)},E=()=>{g("data-ui5-theme-properties",o)},U=async(e,t)=>{const s=[...m()].map(async a=>{if(a===o)return;const i=await n(a,e,t);i&&p(i,`data-ui5-component-properties-${S()}`,a)});return Promise.all(s)},b=async e=>{const t=c();if(t)return t;const r=u("OpenUI5Support");if(r&&r.isOpenUI5Detected()){if(r.cssVariablesLoaded())return{themeName:r.getConfigurationSettingsObject()?.theme,baseThemeName:""}}else if(h())return await T(e),c()},w=async e=>{const t=await b(e);!t||e!==t.themeName?await x(e):E();const r=t&&t.themeName===e?e:void 0,s=t&&t.baseThemeName,a=d(e)?e:s||y;await U(a,r),l(s),f(e)};export default w;
//# sourceMappingURL=applyTheme.js.map
