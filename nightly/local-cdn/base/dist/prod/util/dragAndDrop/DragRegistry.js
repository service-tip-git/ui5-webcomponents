"use strict";import p from"../../generated/css/MultipleDragGhost.css.js";import{getI18nBundle as D}from"../../i18nBundle.js";import{DRAG_DROP_MULTIPLE_TEXT as v}from"../../generated/i18n/i18n-defaults.js";const m=2;let n=null,a=null,r=!1;const o=new Set,l=new Set,i=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||(l.has(e.target)||(a=e.target),M(e))},M=async e=>{if(!n||!e.dataTransfer)return;const t=await n;document.body.appendChild(t),e.dataTransfer.setDragImage(t,0,0),requestAnimationFrame(()=>{t.remove()})},c=()=>{a=null,n=null},g=()=>{a=null,n=null},f=e=>{a=e},b=()=>a,y=async e=>{const t=document.createElement("div"),E=await D("@ui5/webcomponents-base"),s=t.attachShadow({mode:"open"}),d=new CSSStyleSheet;return d.replaceSync(p),s.adoptedStyleSheets=[d],s.textContent=E.getText(v,e),t},u=(e,t)=>{if(e<m){console.warn(`Cannot start multiple drag with count ${e}. Minimum is ${m}.`);return}n=y(e)},S=()=>{r||(document.body.addEventListener("dragstart",i),document.body.addEventListener("dragend",c),document.body.addEventListener("drop",g),r=!0)},L=()=>{document.body.removeEventListener("dragstart",i),document.body.removeEventListener("dragend",c),document.body.removeEventListener("drop",g),r=!1},T=e=>{o.add(e),r||S()},h=e=>{o.delete(e),o.size===0&&r&&L()},w=e=>(l.add(e),f),H=e=>{l.delete(e)},I={subscribe:T,unsubscribe:h,addSelfManagedArea:w,removeSelfManagedArea:H,getDraggedElement:b,startMultipleDrag:u};export default I;export{u as startMultipleDrag};
//# sourceMappingURL=DragRegistry.js.map
